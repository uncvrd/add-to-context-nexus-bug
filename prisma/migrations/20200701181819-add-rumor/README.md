# Migration `20200701181819-add-rumor`

This migration has been generated by Jordan Lewallen at 7/1/2020, 6:18:19 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "Status" AS ENUM ('REVIEW', 'APPROVED', 'DENIED');

CREATE TABLE "public"."Rumor" (
"date" timestamp(3)  NOT NULL ,"id" SERIAL,"status" "Status" NOT NULL DEFAULT E'REVIEW',"title" text  NOT NULL ,"userId" integer  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."_ArtistToUser" (
"A" integer  NOT NULL ,"B" integer  NOT NULL )

CREATE TABLE "public"."_AlbumToArtist" (
"A" integer  NOT NULL ,"B" integer  NOT NULL )

CREATE TABLE "public"."_ArtistToRumor" (
"A" integer  NOT NULL ,"B" integer  NOT NULL )

CREATE UNIQUE INDEX "_ArtistToUser_AB_unique" ON "public"."_ArtistToUser"("A","B")

CREATE  INDEX "_ArtistToUser_B_index" ON "public"."_ArtistToUser"("B")

CREATE UNIQUE INDEX "_AlbumToArtist_AB_unique" ON "public"."_AlbumToArtist"("A","B")

CREATE  INDEX "_AlbumToArtist_B_index" ON "public"."_AlbumToArtist"("B")

CREATE UNIQUE INDEX "_ArtistToRumor_AB_unique" ON "public"."_ArtistToRumor"("A","B")

CREATE  INDEX "_ArtistToRumor_B_index" ON "public"."_ArtistToRumor"("B")

ALTER TABLE "public"."Rumor" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_ArtistToUser" ADD FOREIGN KEY ("A")REFERENCES "public"."Artist"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_ArtistToUser" ADD FOREIGN KEY ("B")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_AlbumToArtist" ADD FOREIGN KEY ("A")REFERENCES "public"."Album"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_AlbumToArtist" ADD FOREIGN KEY ("B")REFERENCES "public"."Artist"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_ArtistToRumor" ADD FOREIGN KEY ("A")REFERENCES "public"."Artist"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_ArtistToRumor" ADD FOREIGN KEY ("B")REFERENCES "public"."Rumor"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200701170410-add-artist..20200701181819-add-rumor
--- datamodel.dml
+++ datamodel.dml
@@ -1,20 +1,27 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator prisma_client {
   provider = "prisma-client-js"
 }
+enum Status {
+  REVIEW
+  APPROVED
+  DENIED
+}
+
 model User {
   id       Int     @id @default(autoincrement())
   uid      String  @unique
   email    String  @unique
   username String  @unique
   imageURL String?
   artistId Int?
+  following Artist[] @relation(references: [id])
 }
 model Album {
   id Int @id @default(autoincrement())
@@ -22,12 +29,26 @@
   uid String @unique
   appleId Int @unique
   date DateTime
   imageURL String?
+  artists Artist[] @relation(references: [id])
 }
 model Artist {
   id Int @id @default(autoincrement())
   name String
   imageURL String
   appleId Int
+  followers User[] @relation(references: [id])
+  albums Album[] @relation(references: [id])
+  rumors Rumor[] @relation(references: [id])
+}
+
+model Rumor {
+  id Int @id @default(autoincrement())
+  title String
+  date DateTime
+  status Status @default(REVIEW)
+  artists Artist[] @relation(references: [id])
+  user User @relation(fields: [userId], references: [id])
+  userId Int
 }
```


