# Migration `20200702174850-add-backers`

This migration has been generated by Jordan Lewallen at 7/2/2020, 5:48:50 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."_RumorToUser" (
"A" integer  NOT NULL ,"B" integer  NOT NULL )

ALTER TABLE "public"."Rumor" DROP CONSTRAINT IF EXiSTS "Rumor_userId_fkey",
DROP COLUMN "userId";

CREATE UNIQUE INDEX "_RumorToUser_AB_unique" ON "public"."_RumorToUser"("A","B")

CREATE  INDEX "_RumorToUser_B_index" ON "public"."_RumorToUser"("B")

ALTER TABLE "public"."_RumorToUser" ADD FOREIGN KEY ("A")REFERENCES "public"."Rumor"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_RumorToUser" ADD FOREIGN KEY ("B")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200702171904-update-status-enum..20200702174850-add-backers
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator prisma_client {
   provider = "prisma-client-js"
@@ -13,42 +13,42 @@
   DENIED
 }
 model User {
-  id       Int     @id @default(autoincrement())
-  uid      String  @unique
-  email    String  @unique
-  username String  @unique
-  imageURL String?
-  artistId Int?
-  following Artist[] @relation(references: [id])
+  id            Int      @id @default(autoincrement())
+  uid           String   @unique
+  email         String   @unique
+  username      String   @unique
+  imageURL      String?
+  artistId      Int?
+  following     Artist[]
+  contributions Rumor[]
 }
 model Album {
-  id Int @id @default(autoincrement())
-  title String
-  uid String @unique
-  appleId Int @unique
-  date DateTime
+  id       Int      @id @default(autoincrement())
+  title    String
+  uid      String   @unique
+  appleId  Int      @unique
+  date     DateTime
   imageURL String?
-  artists Artist[] @relation(references: [id])
+  artists  Artist[]
 }
 model Artist {
-  id Int @id @default(autoincrement())
-  name String
-  imageURL String?
-  appleId Int
-  followers User[] @relation(references: [id])
-  albums Album[] @relation(references: [id])
-  rumors Rumor[] @relation(references: [id])
+  id        Int     @id @default(autoincrement())
+  name      String
+  imageURL  String?
+  appleId   Int
+  followers User[]
+  albums    Album[]
+  rumors    Rumor[]
 }
 model Rumor {
-  id Int @id @default(autoincrement())
-  title String
-  date DateTime
-  status Status @default(IN_REVIEW)
-  artists Artist[] @relation(references: [id])
-  user User @relation(fields: [userId], references: [id])
-  userId Int
-}
+  id      Int      @id @default(autoincrement())
+  title   String
+  date    DateTime
+  status  Status   @default(IN_REVIEW)
+  artists Artist[]
+  backers User[]
+}
```


